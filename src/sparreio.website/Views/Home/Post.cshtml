@using System.Globalization
@using Markdig
@using sparreio.website.Utils
@using sparreio.website.ViewModels.Home

@model PostViewModel
@{
    var pipeline = new MarkdownPipelineBuilder()
        .UseAdvancedExtensions()
        .UseCustomContainers()
        .Build();

    var renderedContent = Markdown.ToHtml(Model.Content, pipeline);

    ViewBag.Title = Model.Title;
}
<section class="post">
    <header>
        <h1>@Model.Title</h1>
        <div>@Model.PublishedUtc.ToLocalTime().ToString("D", new CultureInfo("en-us"))</div>
    </header>
    <section class="content">
        @Html.Raw(renderedContent)
    </section>
    <footer>
        @foreach (var tag in Model.Tags)
        {
            <a asp-action="PostsByTag" asp-route-tag="@tag" title="@tag" class="tag">@tag</a>
        }
    </footer>
</section>